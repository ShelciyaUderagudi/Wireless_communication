# Simulate multiple random channels and compute the average throughput
import numpy as np
import matplotlib.pyplot as plt

# Parameters
B = 1e6   # 1MHz
snr_db_mean = 10   # Avg SNR in dB
snr_db_std = 5   # Standard deviation
num_realization = 1000   # num of random channels

# Generate random SNRs for multiple realizations
snr_db = np.random.normal(snr_db_mean, snr_db_std, num_realization)
#print(snr_db)
#plt.plot(snr_db) # draws a line plot
#histogram plt
""""
plt.hist(snr_db, bins=20, density=True, alpha=0.7)
plt.title("Gaussian DIstribution of SNR (in dB)")
plt.xlabel("SNR(dB)")
plt.ylabel("Probability Density")
plt.show()"""

snr_linear = 10**(snr_db / 10)   # dB to linear

# Shannon capacity
throughput = B * np.log2(1 + snr_linear)

# Abg throughput
avg_throughput = np.mean(throughput) 
print(f"Average throughput over{num_realization} channels: {avg_throughput:.2f} bps") #.2f - keep 2 digits after the decimal

#plot histogram of throughputs
plt.figure()
plt.hist(throughput, bins=15, color='skyblue', edgecolor='black')
plt.xlabel("Throughput (bps)")
plt.ylabel("Number of channels")
plt.title("Distribution of Throughput for Random Channels")
plt.grid(True)
plt.show()
